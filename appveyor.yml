image: Visual Studio 2017

environment:
  MSVC_DEFAULT_OPTIONS: ON
  
configuration:
 - Release

platform: x64
   

branches:
 only: 
  - windows
  
clone_folder: C:\projects\nifi-minifi-cpp
  
build_script:
   - cd C:\projects\nifi-minifi-cpp
   - mkdir build
   - cd build
   - cmake -g "Visual Studio 15 2017" .. -DUSE_SYSTEM_OPENSSL=on -DOPENSSL_ROOT_HINTS="c:\\OpenSSL-Win64\" -DDISABLE_ROCKSDB=ON -DDISABLE_CURL=TRUE -DDISABLE_LIBARCHIVE=TRUE -DDISABLE_SCRIPTING=TRUE -DEXCLUDE_BOOST=TRUE -DDISABLE_EXPRESSION_LANGUAGE=TRUE -DSKIP_TESTS=TRUE
   
   - if "%platform%" == "x86" set msbuild_platform=Win32
   - if "%platform%" == "x64" set msbuild_platform=%platform% 
   - msbuild nifi-minifi-cpp.sln /p:Configuration=%configuration% /toolsversion:14.0 /p:PlatformToolset=v140 /p:Platform=%msbuild_platform%
   
